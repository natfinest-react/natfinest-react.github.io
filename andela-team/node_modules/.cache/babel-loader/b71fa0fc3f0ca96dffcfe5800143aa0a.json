{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialUser = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : null;\nexport const initialState = {\n  user: initialUser,\n  articles: []\n}; // A slice of user with our reducers\n\nconst articlesSlice = createSlice({\n  name: \"articles\",\n  initialState,\n  reducers: {\n    getArticlesSuccess: (state, action) => {\n      state.articles = action.payload;\n    },\n    getArticlesFailure: (state, action) => {\n      state.error = action.payload;\n    },\n    postArticleSuccess: (state, action) => {\n      state.articles = action.payload;\n    },\n    postArticleFailure: (state, action) => {\n      state.error = action.payload;\n    }\n  }\n}); // Three actions generated from the slice\n\nexport const {\n  getArticlesSuccess,\n  getArticlesFailure,\n  postArticleFailure,\n  postArticleSuccess\n} = articlesSlice.actions; // A selector\n\nexport const articlesSelector = state => state.articles; // The reducer\n\nexport default articlesSlice.reducer; // Asynchronous thunk action\n// export const fetchFeeds = () => async (dispatch) => {\n//   const token = initialState.user.user.token;\n//   axios\n//     .get(\"http://localhost:5000/api/v1/feed\", {\n//       headers: {\n//         Authorization: \"Bearer \" + token,\n//       },\n//     })\n//     .then((response) => {\n//       // const feed = response.data;\n//       const feed = response.data.data;\n//       console.log(feed);\n//       dispatch(getFeedSuccess({ feed }));\n//     })\n//     .catch((error) => {\n//       const err = error.response.data.error;\n//       dispatch(getFeedsFailure({ err }));\n//     });\n// };\n\nexport function postArticle(token, {\n  form_title,\n  form_desc,\n  form_cat,\n  form_share\n}) {\n  var bearer_token;\n\n  if (token.length > 0) {\n    bearer_token = token;\n  } else {\n    bearer_token = initialState.user.user.token;\n  }\n\n  const content = {\n    title: form_title,\n    description: form_desc,\n    category: form_cat,\n    share: form_share\n  };\n  return async dispatch => {\n    try {\n      // const bearer_token = initialState.user.user.token;\n      const response = await fetch(\"http://localhost:5000/api/v1/articles\", {\n        method: \"POST\",\n        headers: {\n          authorization: \"Bearer \" + bearer_token\n        },\n        body: content\n      });\n      const data = await response.json();\n      console.log(data);\n      dispatch(postArticleSuccess(data.data.message));\n    } catch (error) {\n      console.log(JSON.stringify(content));\n      console.log(error);\n      dispatch(postArticleFailure());\n    }\n  };\n}\nexport function fetchArticles(token) {\n  var bearer_token;\n\n  if (token.length > 0) {\n    bearer_token = token;\n  } else {\n    bearer_token = initialState.user.user.token;\n  }\n\n  return async dispatch => {\n    try {\n      // const bearer_token = initialState.user.user.token;\n      const response = await fetch(\"http://localhost:5000/api/v1/articles\", {\n        headers: {\n          authorization: \"Bearer \" + bearer_token\n        }\n      });\n      const data = await response.json();\n      dispatch(getArticlesSuccess(data.data.message));\n    } catch (error) {\n      console.log(error);\n      dispatch(getArticlesFailure());\n    }\n  };\n}","map":{"version":3,"sources":["/Users/user/Documents/Andela_Teamwork_Frontend/frontend/src/slices/articles.js"],"names":["createSlice","initialUser","localStorage","getItem","JSON","parse","initialState","user","articles","articlesSlice","name","reducers","getArticlesSuccess","state","action","payload","getArticlesFailure","error","postArticleSuccess","postArticleFailure","actions","articlesSelector","reducer","postArticle","token","form_title","form_desc","form_cat","form_share","bearer_token","length","content","title","description","category","share","dispatch","response","fetch","method","headers","authorization","body","data","json","console","log","message","stringify","fetchArticles"],"mappings":"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","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nconst initialUser = localStorage.getItem(\"user\")\n  ? JSON.parse(localStorage.getItem(\"user\"))\n  : null;\n\nexport const initialState = {\n  user: initialUser,\n  articles: [],\n};\n\n// A slice of user with our reducers\nconst articlesSlice = createSlice({\n  name: \"articles\",\n  initialState,\n  reducers: {\n    getArticlesSuccess: (state, action) => {\n      state.articles = action.payload;\n    },\n    getArticlesFailure: (state, action) => {\n      state.error = action.payload;\n    },\n    postArticleSuccess: (state, action) => {\n      state.articles = action.payload;\n    },\n    postArticleFailure: (state, action) => {\n      state.error = action.payload;\n    },\n  },\n});\n\n// Three actions generated from the slice\nexport const {\n  getArticlesSuccess,\n  getArticlesFailure,\n  postArticleFailure,\n  postArticleSuccess,\n} = articlesSlice.actions;\n\n// A selector\nexport const articlesSelector = (state) => state.articles;\n\n// The reducer\nexport default articlesSlice.reducer;\n\n// Asynchronous thunk action\n// export const fetchFeeds = () => async (dispatch) => {\n//   const token = initialState.user.user.token;\n//   axios\n//     .get(\"http://localhost:5000/api/v1/feed\", {\n//       headers: {\n//         Authorization: \"Bearer \" + token,\n//       },\n//     })\n//     .then((response) => {\n//       // const feed = response.data;\n//       const feed = response.data.data;\n//       console.log(feed);\n//       dispatch(getFeedSuccess({ feed }));\n//     })\n//     .catch((error) => {\n//       const err = error.response.data.error;\n//       dispatch(getFeedsFailure({ err }));\n//     });\n// };\nexport function postArticle(\n  token,\n  { form_title, form_desc, form_cat, form_share }\n) {\n  var bearer_token;\n  if (token.length > 0) {\n    bearer_token = token;\n  } else {\n    bearer_token = initialState.user.user.token;\n  }\n  const content = {\n    title: form_title,\n    description: form_desc,\n    category: form_cat,\n    share: form_share,\n  };\n  return async (dispatch) => {\n    try {\n      // const bearer_token = initialState.user.user.token;\n\n      const response = await fetch(\"http://localhost:5000/api/v1/articles\", {\n        method: \"POST\",\n        headers: {\n          authorization: \"Bearer \" + bearer_token,\n        },\n        body: content,\n      });\n\n      const data = await response.json();\n      console.log(data);\n      dispatch(postArticleSuccess(data.data.message));\n    } catch (error) {\n      console.log(JSON.stringify(content));\n      console.log(error);\n      dispatch(postArticleFailure());\n    }\n  };\n}\n\nexport function fetchArticles(token) {\n  var bearer_token;\n  if (token.length > 0) {\n    bearer_token = token;\n  } else {\n    bearer_token = initialState.user.user.token;\n  }\n  return async (dispatch) => {\n    try {\n      // const bearer_token = initialState.user.user.token;\n      const response = await fetch(\"http://localhost:5000/api/v1/articles\", {\n        headers: {\n          authorization: \"Bearer \" + bearer_token,\n        },\n      });\n\n      const data = await response.json();\n      dispatch(getArticlesSuccess(data.data.message));\n    } catch (error) {\n      console.log(error);\n      dispatch(getArticlesFailure());\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}