{"ast":null,"code":"import _regeneratorRuntime from\"/Users/user/Documents/Andela_Teamwork_Frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/user/Documents/Andela_Teamwork_Frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice}from\"@reduxjs/toolkit\";import url from\"../components/config\";var initialUser=localStorage.getItem(\"user\")?JSON.parse(localStorage.getItem(\"user\")):null;export var initialState={user:initialUser,loading:false,hasErrors:false,article:{}};// A slice of user with our reducers\nvar articleSlice=createSlice({name:\"article\",initialState:initialState,reducers:{getArticle:function getArticle(state){state.loading=true;},getArticleSuccess:function getArticleSuccess(state,action){state.article=action.payload;state.loading=false;},getArticleFailure:function getArticleFailure(state,action){state.error=action.payload;state.loading=false;},postCommentSuccess:function postCommentSuccess(state,action){state.article=action.payload;state.loading=false;},postCommentFailure:function postCommentFailure(state,action){state.error=action.payload;state.loading=false;},editArticleSuccess:function editArticleSuccess(state,action){state.article=action.payload;state.loading=false;},editArticleFailure:function editArticleFailure(state,action){state.error=action.payload;state.loading=false;},deleteArticleSuccess:function deleteArticleSuccess(state,action){state.article=action.payload;state.loading=false;},deleteArticleFailure:function deleteArticleFailure(state,action){state.error=action.payload;state.loading=false;}}});// Three actions generated from the slice\nvar _articleSlice$actions=articleSlice.actions,getArticle=_articleSlice$actions.getArticle,getArticleSuccess=_articleSlice$actions.getArticleSuccess,getArticleFailure=_articleSlice$actions.getArticleFailure,editArticleSuccess=_articleSlice$actions.editArticleSuccess,editArticleFailure=_articleSlice$actions.editArticleFailure,deleteArticleSuccess=_articleSlice$actions.deleteArticleSuccess,deleteArticleFailure=_articleSlice$actions.deleteArticleFailure,postCommentSuccess=_articleSlice$actions.postCommentSuccess,postCommentFailure=_articleSlice$actions.postCommentFailure;// A selector\nexport{getArticle,getArticleSuccess,getArticleFailure,editArticleSuccess,editArticleFailure,deleteArticleSuccess,deleteArticleFailure,postCommentSuccess,postCommentFailure};export var articleSelector=function articleSelector(state){return state.article;};// The reducer\nexport default articleSlice.reducer;export function postComment(_ref,id){var form_comment=_ref.form_comment;var bearer_token=JSON.parse(localStorage.getItem(\"user\")).user.token;var content={description:form_comment};return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(url,\"/api/v1/articles/\").concat(id,\"/Comment\"),{method:\"POST\",headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\",authorization:\"Bearer \"+bearer_token},body:JSON.stringify(content)});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(data);dispatch(postCommentSuccess(data.data.message));_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(JSON.stringify(content));console.log(_context.t0);dispatch(postCommentFailure());case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function(_x){return _ref2.apply(this,arguments);};}();}export function fetchArticle(id){var bearer_token=JSON.parse(localStorage.getItem(\"user\")).user.token;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(getArticle());_context2.prev=1;_context2.next=4;return fetch(\"\".concat(url,\"/api/v1/articles/\").concat(id),{headers:{authorization:\"Bearer \"+bearer_token}});case 4:response=_context2.sent;_context2.next=7;return response.json();case 7:data=_context2.sent;dispatch(getArticleSuccess(data.data));_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);dispatch(getArticleFailure());case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();}export function deleteArticle(id){// console.log(JSON.parse(localStorage.getItem(\"user\")));\nvar bearer_token=JSON.parse(localStorage.getItem(\"user\")).user.token;return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(getArticle());_context3.prev=1;_context3.next=4;return fetch(\"\".concat(url,\"/api/v1/articles/\").concat(id),{method:\"DELETE\",headers:{authorization:\"Bearer \"+bearer_token}});case 4:response=_context3.sent;_context3.next=7;return response.json();case 7:data=_context3.sent;dispatch(deleteArticleSuccess(data.data));_context3.next=15;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);dispatch(deleteArticleFailure());case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[1,11]]);}));return function(_x3){return _ref4.apply(this,arguments);};}();}export function editArticle(id,_ref5){var form_title=_ref5.form_title,form_desc=_ref5.form_desc;var bearer_token=JSON.parse(localStorage.getItem(\"user\")).user.token;var content={title:form_title,description:form_desc};return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var response,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"\".concat(url,\"/api/v1/articles/\").concat(id),{method:\"PUT\",headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\",authorization:\"Bearer \"+bearer_token},body:JSON.stringify(content)});case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:data=_context4.sent;dispatch(editArticleSuccess(data.data.message));_context4.next=15;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);console.log(JSON.stringify(content));console.log(_context4.t0);dispatch(editArticleFailure());case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[0,10]]);}));return function(_x4){return _ref6.apply(this,arguments);};}();}","map":{"version":3,"sources":["/Users/user/Documents/Andela_Teamwork_Frontend/frontend/src/slices/article.js"],"names":["createSlice","url","initialUser","localStorage","getItem","JSON","parse","initialState","user","loading","hasErrors","article","articleSlice","name","reducers","getArticle","state","getArticleSuccess","action","payload","getArticleFailure","error","postCommentSuccess","postCommentFailure","editArticleSuccess","editArticleFailure","deleteArticleSuccess","deleteArticleFailure","actions","articleSelector","reducer","postComment","id","form_comment","bearer_token","token","content","description","dispatch","fetch","method","headers","Accept","authorization","body","stringify","response","json","data","console","log","message","fetchArticle","deleteArticle","editArticle","form_title","form_desc","title"],"mappings":"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","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport url from \"../components/config\";\n\nconst initialUser = localStorage.getItem(\"user\")\n  ? JSON.parse(localStorage.getItem(\"user\"))\n  : null;\n\nexport const initialState = {\n  user: initialUser,\n  loading: false,\n  hasErrors: false,\n  article: {},\n};\n\n// A slice of user with our reducers\nconst articleSlice = createSlice({\n  name: \"article\",\n  initialState,\n  reducers: {\n    getArticle: (state) => {\n      state.loading = true;\n    },\n    getArticleSuccess: (state, action) => {\n      state.article = action.payload;\n      state.loading = false;\n    },\n    getArticleFailure: (state, action) => {\n      state.error = action.payload;\n      state.loading = false;\n    },\n    postCommentSuccess: (state, action) => {\n      state.article = action.payload;\n      state.loading = false;\n    },\n    postCommentFailure: (state, action) => {\n      state.error = action.payload;\n      state.loading = false;\n    },\n    editArticleSuccess: (state, action) => {\n      state.article = action.payload;\n      state.loading = false;\n    },\n    editArticleFailure: (state, action) => {\n      state.error = action.payload;\n      state.loading = false;\n    },\n    deleteArticleSuccess: (state, action) => {\n      state.article = action.payload;\n      state.loading = false;\n    },\n    deleteArticleFailure: (state, action) => {\n      state.error = action.payload;\n      state.loading = false;\n    },\n  },\n});\n\n// Three actions generated from the slice\nexport const {\n  getArticle,\n  getArticleSuccess,\n  getArticleFailure,\n  editArticleSuccess,\n  editArticleFailure,\n  deleteArticleSuccess,\n  deleteArticleFailure,\n  postCommentSuccess,\n  postCommentFailure,\n} = articleSlice.actions;\n\n// A selector\nexport const articleSelector = (state) => state.article;\n\n// The reducer\nexport default articleSlice.reducer;\n\nexport function postComment({ form_comment }, id) {\n  const bearer_token = JSON.parse(localStorage.getItem(\"user\")).user.token;\n  const content = {\n    description: form_comment,\n  };\n  return async (dispatch) => {\n    try {\n      const response = await fetch(`${url}/api/v1/articles/${id}/Comment`, {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json, text/plain, */*\",\n          \"Content-Type\": \"application/json\",\n          authorization: \"Bearer \" + bearer_token,\n        },\n        body: JSON.stringify(content),\n      });\n\n      const data = await response.json();\n      console.log(data);\n      dispatch(postCommentSuccess(data.data.message));\n    } catch (error) {\n      console.log(JSON.stringify(content));\n      console.log(error);\n      dispatch(postCommentFailure());\n    }\n  };\n}\n\nexport function fetchArticle(id) {\n  const bearer_token = JSON.parse(localStorage.getItem(\"user\")).user.token;\n  return async (dispatch) => {\n    dispatch(getArticle());\n    try {\n      const response = await fetch(`${url}/api/v1/articles/${id}`, {\n        headers: {\n          authorization: \"Bearer \" + bearer_token,\n        },\n      });\n\n      const data = await response.json();\n      dispatch(getArticleSuccess(data.data));\n    } catch (error) {\n      console.log(error);\n      dispatch(getArticleFailure());\n    }\n  };\n}\n\nexport function deleteArticle(id) {\n  // console.log(JSON.parse(localStorage.getItem(\"user\")));\n  const bearer_token = JSON.parse(localStorage.getItem(\"user\")).user.token;\n  return async (dispatch) => {\n    dispatch(getArticle());\n    try {\n      const response = await fetch(`${url}/api/v1/articles/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          authorization: \"Bearer \" + bearer_token,\n        },\n      });\n\n      const data = await response.json();\n      dispatch(deleteArticleSuccess(data.data));\n    } catch (error) {\n      console.log(error);\n      dispatch(deleteArticleFailure());\n    }\n  };\n}\n\nexport function editArticle(id, { form_title, form_desc }) {\n  const bearer_token = JSON.parse(localStorage.getItem(\"user\")).user.token;\n  const content = {\n    title: form_title,\n    description: form_desc,\n  };\n  return async (dispatch) => {\n    try {\n      const response = await fetch(`${url}/api/v1/articles/${id}`, {\n        method: \"PUT\",\n        headers: {\n          Accept: \"application/json, text/plain, */*\",\n          \"Content-Type\": \"application/json\",\n          authorization: \"Bearer \" + bearer_token,\n        },\n        body: JSON.stringify(content),\n      });\n\n      const data = await response.json();\n      dispatch(editArticleSuccess(data.data.message));\n    } catch (error) {\n      console.log(JSON.stringify(content));\n      console.log(error);\n      dispatch(editArticleFailure());\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}