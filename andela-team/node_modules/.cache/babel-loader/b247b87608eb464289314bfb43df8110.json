{"ast":null,"code":"var _jsxFileName = \"/Users/user/Documents/Andela_Teamwork_Frontend/frontend/src/containers/Articles/index.js\";\nimport React, { useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { articlesSelector, postArticle, fetchArticles } from \"../../slices/articles\";\nimport { Field, Form, Formik } from \"formik\";\nimport { TextField } from \"material-ui-formik-components/TextField\";\nimport { Select } from \"material-ui-formik-components/Select\";\nimport { Container, Grid, Card, CardContent, Typography, Button } from \"@material-ui/core\";\nimport Article from \"../../components/Article\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport ReactPaginate from \"react-paginate\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport \"./style.css\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nconst useStyles = makeStyles(theme => ({\n  media: {\n    height: 140\n  },\n  root: {\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: \"#fff\"\n  },\n  bs: {\n    boxShadow: \"2px 2px 7px 1px #ccc\"\n  },\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    outline: 0\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: \"#fff\"\n  }\n}));\n\nconst Articles = props => {\n  const classes = useStyles();\n  const [art, setArt] = React.useState({});\n  const dispatch = useDispatch();\n  const {\n    articles,\n    loading\n  } = useSelector(articlesSelector, {\n    onCompleted: setArt\n  });\n  var token;\n\n  if (!props.location.state) {\n    token = \"\";\n  } else {\n    token = props.location.state.id;\n  }\n\n  const [open, setOpen] = React.useState(false);\n  var [count, setCount] = React.useState(0);\n  const [show, setShow] = React.useState(false);\n  const [msg, setMsg] = React.useState(\"\");\n  const [type, setType] = React.useState(\"\");\n  useEffect(() => {\n    dispatch(fetchArticles(token));\n    setArt(articles);\n  }, [dispatch], articles);\n  console.log(art);\n\n  const handleNewArticle = () => {\n    console.log(art); // const obj = {};\n    // obj[\"newKey\"] = [];\n    // obj.newKey = [];\n    // {\n    //   /* setArt() */\n    // }\n  };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  function Alert(props) {\n    return /*#__PURE__*/React.createElement(MuiAlert, Object.assign({\n      elevation: 6,\n      variant: \"filled\"\n    }, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 12\n      }\n    }));\n  }\n\n  const showReport = (val, type) => {\n    setMsg(val);\n    setType(type);\n    setShow(true);\n  };\n\n  const hideReport = () => {\n    setShow(false);\n  };\n\n  var offset = 0;\n  var perpage = 8;\n  var currentpage;\n  const pageCount = Math.ceil(articles.length / perpage);\n\n  const handlePageClick = e => {\n    var selectedPage = e.selected;\n    offset = selectedPage * perpage;\n    currentpage = selectedPage;\n    setCount(offset);\n  };\n\n  const renderArticles = () => {\n    if (loading) return /*#__PURE__*/React.createElement(Backdrop, {\n      className: classes.backdrop,\n      open: true,\n      onClick: handleClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      color: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }));\n    return articles.slice(count, count + perpage).map(article => /*#__PURE__*/React.createElement(Article, {\n      key: article.id,\n      article: article,\n      token: token,\n      excerpt: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Snackbar, {\n    open: show,\n    autoHideDuration: 6000,\n    onClose: hideReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    onClose: hideReport,\n    severity: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, msg)), /*#__PURE__*/React.createElement(Container, {\n    maxWidth: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    alignItems: \"center\",\n    container: true,\n    spacing: 1,\n    style: {\n      marginTop: 100\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    xs: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, \"Articles\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    xs: 4,\n    style: {\n      textAlign: \"right\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, \"Create Article\"), /*#__PURE__*/React.createElement(Modal, {\n    \"aria-labelledby\": \"transition-modal-title\",\n    \"aria-describedby\": \"transition-modal-description\",\n    className: classes.modal,\n    open: open,\n    onClose: handleClose,\n    closeAfterTransition: true,\n    BackdropComponent: Backdrop,\n    BackdropProps: {\n      timeout: 500\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Fade, {\n    in: open,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 23\n    }\n  }, \"Create Article\"), /*#__PURE__*/React.createElement(Formik, {\n    initialValues: {\n      form_title: \"\",\n      form_desc: \"\",\n      form_cat: \"\",\n      form_share: \"\"\n    },\n    onSubmit: (values, {\n      setSubmitting,\n      resetForm\n    }) => {\n      dispatch(postArticle(token, values)); // When button submits form and form is in the process of submitting, submit button is disabled\n\n      setSubmitting(true); // Resets form after submission is complete\n\n      resetForm(); // Sets setSubmitting to false after form is reset\n\n      setSubmitting(false);\n      console.log(\"second\");\n      dispatch(fetchArticles(token));\n      handleClose();\n      showReport(\"Article Created Successfully\", \"success\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 23\n    }\n  }, ({\n    isSubmitting\n  }) => /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Field, {\n    id: \"outlined-full-width\",\n    required: true,\n    component: TextField,\n    type: \"text\",\n    name: \"form_title\",\n    label: \"Title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Field, {\n    id: \"outlined-full-width\",\n    required: true,\n    multiline: true,\n    component: TextField,\n    type: \"text\",\n    name: \"form_desc\",\n    label: \"Description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Field, {\n    id: \"outlined-full-width\",\n    required: true,\n    component: TextField,\n    type: \"text\",\n    name: \"form_cat\",\n    label: \"Category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Field, {\n    id: \"outlined-full-width\",\n    required: true,\n    name: \"form_share\",\n    label: \"Make Article Sharable?\",\n    options: [{\n      value: \"Yes\",\n      label: \"Yes\"\n    }, {\n      value: \"No\",\n      label: \"No\"\n    }],\n    component: Select,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    id: \"outlined-full-width\",\n    type: \"submit\",\n    disabled: isSubmitting,\n    variant: \"contained\",\n    color: \"primary\",\n    align: \"center\",\n    style: {\n      marginTop: 20,\n      marginLeft: \"40%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 29\n    }\n  }, \"Submit\")))))))))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 0,\n    style: {\n      marginTop: 40\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }\n  }, renderArticles()), /*#__PURE__*/React.createElement(ReactPaginate, {\n    previousLabel: \"Prev\",\n    nextLabel: \"Next\",\n    breakLabel: \"...\",\n    breakClassName: \"break-me\",\n    marginPagesDisplayed: 2,\n    pageRangeDisplayed: 5,\n    pageCount: pageCount,\n    onPageChange: handlePageClick,\n    containerClassName: \"pagination\",\n    subContainerClassName: \"pages pagination\",\n    activeClassName: \"active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default Articles;","map":{"version":3,"sources":["/Users/user/Documents/Andela_Teamwork_Frontend/frontend/src/containers/Articles/index.js"],"names":["React","useEffect","makeStyles","useSelector","useDispatch","articlesSelector","postArticle","fetchArticles","Field","Form","Formik","TextField","Select","Container","Grid","Card","CardContent","Typography","Button","Article","Modal","Backdrop","Fade","CircularProgress","ReactPaginate","MuiAlert","Snackbar","useStyles","theme","media","height","root","width","maxWidth","backgroundColor","bs","boxShadow","modal","display","alignItems","justifyContent","outline","paper","palette","background","border","shadows","padding","spacing","backdrop","zIndex","drawer","color","Articles","props","classes","art","setArt","useState","dispatch","articles","loading","onCompleted","token","location","state","id","open","setOpen","count","setCount","show","setShow","msg","setMsg","type","setType","console","log","handleNewArticle","handleOpen","handleClose","Alert","showReport","val","hideReport","offset","perpage","currentpage","pageCount","Math","ceil","length","handlePageClick","e","selectedPage","selected","renderArticles","slice","map","article","marginTop","textAlign","timeout","form_title","form_desc","form_cat","form_share","values","setSubmitting","resetForm","isSubmitting","value","label","marginLeft"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SACEC,gBADF,EAEEC,WAFF,EAGEC,aAHF,QAIO,uBAJP;AAKA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,MAAtB,QAAoC,QAApC;AACA,SAASC,SAAT,QAA0B,yCAA1B;AACA,SAASC,MAAT,QAAuB,sCAAvB;AACA,SACEC,SADF,EAEEC,IAFF,EAGEC,IAHF,EAIEC,WAJF,EAKEC,UALF,EAMEC,MANF,QAOO,mBAPP;AAQA,OAAOC,OAAP,MAAoB,0BAApB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,aAAP,MAA0B,gBAA1B;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAO,aAAP;AACA,OAAOC,QAAP,MAAqB,4BAArB;AAEA,MAAMC,SAAS,GAAGzB,UAAU,CAAE0B,KAAD,KAAY;AACvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAE;AADH,GADgC;AAIvCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,KAAK,EAAE,MADH;AAEJC,IAAAA,QAAQ,EAAE,GAFN;AAGJC,IAAAA,eAAe,EAAE;AAHb,GAJiC;AASvCC,EAAAA,EAAE,EAAE;AACFC,IAAAA,SAAS,EAAE;AADT,GATmC;AAYvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAE,MADJ;AAELC,IAAAA,UAAU,EAAE,QAFP;AAGLC,IAAAA,cAAc,EAAE,QAHX;AAILC,IAAAA,OAAO,EAAE;AAJJ,GAZgC;AAkBvCC,EAAAA,KAAK,EAAE;AACLR,IAAAA,eAAe,EAAEN,KAAK,CAACe,OAAN,CAAcC,UAAd,CAAyBF,KADrC;AAELG,IAAAA,MAAM,EAAE,gBAFH;AAGLT,IAAAA,SAAS,EAAER,KAAK,CAACkB,OAAN,CAAc,CAAd,CAHN;AAILC,IAAAA,OAAO,EAAEnB,KAAK,CAACoB,OAAN,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AAJJ,GAlBgC;AAwBvCC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,MAAM,EAAEtB,KAAK,CAACsB,MAAN,CAAaC,MAAb,GAAsB,CADtB;AAERC,IAAAA,KAAK,EAAE;AAFC;AAxB6B,CAAZ,CAAD,CAA5B;;AA8BA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AAC1B,QAAMC,OAAO,GAAG5B,SAAS,EAAzB;AAEA,QAAM,CAAC6B,GAAD,EAAMC,MAAN,IAAgBzD,KAAK,CAAC0D,QAAN,CAAe,EAAf,CAAtB;AAEA,QAAMC,QAAQ,GAAGvD,WAAW,EAA5B;AACA,QAAM;AAAEwD,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAAwB1D,WAAW,CAACE,gBAAD,EAAmB;AAC1DyD,IAAAA,WAAW,EAAEL;AAD6C,GAAnB,CAAzC;AAIA,MAAIM,KAAJ;;AACA,MAAI,CAACT,KAAK,CAACU,QAAN,CAAeC,KAApB,EAA2B;AACzBF,IAAAA,KAAK,GAAG,EAAR;AACD,GAFD,MAEO;AACLA,IAAAA,KAAK,GAAGT,KAAK,CAACU,QAAN,CAAeC,KAAf,CAAqBC,EAA7B;AACD;;AAED,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBpE,KAAK,CAAC0D,QAAN,CAAe,KAAf,CAAxB;AACA,MAAI,CAACW,KAAD,EAAQC,QAAR,IAAoBtE,KAAK,CAAC0D,QAAN,CAAe,CAAf,CAAxB;AACA,QAAM,CAACa,IAAD,EAAOC,OAAP,IAAkBxE,KAAK,CAAC0D,QAAN,CAAe,KAAf,CAAxB;AACA,QAAM,CAACe,GAAD,EAAMC,MAAN,IAAgB1E,KAAK,CAAC0D,QAAN,CAAe,EAAf,CAAtB;AACA,QAAM,CAACiB,IAAD,EAAOC,OAAP,IAAkB5E,KAAK,CAAC0D,QAAN,CAAe,EAAf,CAAxB;AAEAzD,EAAAA,SAAS,CACP,MAAM;AACJ0D,IAAAA,QAAQ,CAACpD,aAAa,CAACwD,KAAD,CAAd,CAAR;AACAN,IAAAA,MAAM,CAACG,QAAD,CAAN;AACD,GAJM,EAKP,CAACD,QAAD,CALO,EAMPC,QANO,CAAT;AASAiB,EAAAA,OAAO,CAACC,GAAR,CAAYtB,GAAZ;;AACA,QAAMuB,gBAAgB,GAAG,MAAM;AAC7BF,IAAAA,OAAO,CAACC,GAAR,CAAYtB,GAAZ,EAD6B,CAE7B;AACA;AACA;AACA;AACA;AACA;AACD,GARD;;AAUA,QAAMwB,UAAU,GAAG,MAAM;AACvBZ,IAAAA,OAAO,CAAC,IAAD,CAAP;AACD,GAFD;;AAIA,QAAMa,WAAW,GAAG,MAAM;AACxBb,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAFD;;AAIA,WAASc,KAAT,CAAe5B,KAAf,EAAsB;AACpB,wBAAO,oBAAC,QAAD;AAAU,MAAA,SAAS,EAAE,CAArB;AAAwB,MAAA,OAAO,EAAC;AAAhC,OAA6CA,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;AACD;;AAED,QAAM6B,UAAU,GAAG,CAACC,GAAD,EAAMT,IAAN,KAAe;AAChCD,IAAAA,MAAM,CAACU,GAAD,CAAN;AACAR,IAAAA,OAAO,CAACD,IAAD,CAAP;AACAH,IAAAA,OAAO,CAAC,IAAD,CAAP;AACD,GAJD;;AAMA,QAAMa,UAAU,GAAG,MAAM;AACvBb,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAFD;;AAIA,MAAIc,MAAM,GAAG,CAAb;AACA,MAAIC,OAAO,GAAG,CAAd;AACA,MAAIC,WAAJ;AAEA,QAAMC,SAAS,GAAGC,IAAI,CAACC,IAAL,CAAU/B,QAAQ,CAACgC,MAAT,GAAkBL,OAA5B,CAAlB;;AAEA,QAAMM,eAAe,GAAIC,CAAD,IAAO;AAC7B,QAAIC,YAAY,GAAGD,CAAC,CAACE,QAArB;AACAV,IAAAA,MAAM,GAAGS,YAAY,GAAGR,OAAxB;AACAC,IAAAA,WAAW,GAAGO,YAAd;AACAzB,IAAAA,QAAQ,CAACgB,MAAD,CAAR;AACD,GALD;;AAOA,QAAMW,cAAc,GAAG,MAAM;AAC3B,QAAIpC,OAAJ,EACE,oBACE,oBAAC,QAAD;AACE,MAAA,SAAS,EAAEN,OAAO,CAACN,QADrB;AAEE,MAAA,IAAI,EAAE,IAFR;AAGE,MAAA,OAAO,EAAEgC,WAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE,oBAAC,gBAAD;AAAkB,MAAA,KAAK,EAAC,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,CADF;AASF,WAAOrB,QAAQ,CACZsC,KADI,CACE7B,KADF,EACSA,KAAK,GAAGkB,OADjB,EAEJY,GAFI,CAECC,OAAD,iBACH,oBAAC,OAAD;AAAS,MAAA,GAAG,EAAEA,OAAO,CAAClC,EAAtB;AAA0B,MAAA,OAAO,EAAEkC,OAAnC;AAA4C,MAAA,KAAK,EAAErC,KAAnD;AAA0D,MAAA,OAAO,MAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHG,CAAP;AAKD,GAhBD;;AAkBA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAEQ,IAAhB;AAAsB,IAAA,gBAAgB,EAAE,IAAxC;AAA8C,IAAA,OAAO,EAAEc,UAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAEA,UAAhB;AAA4B,IAAA,QAAQ,EAAEV,IAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,GADH,CADF,CADF,eAME,oBAAC,SAAD;AAAW,IAAA,QAAQ,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AACE,IAAA,UAAU,EAAC,QADb;AAEE,IAAA,SAAS,MAFX;AAGE,IAAA,OAAO,EAAE,CAHX;AAIE,IAAA,KAAK,EAAE;AAAE4B,MAAAA,SAAS,EAAE;AAAb,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CANF,eASE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAA0B,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,WAAhB;AAA4B,IAAA,KAAK,EAAC,SAAlC;AAA4C,IAAA,OAAO,EAAEtB,UAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE,oBAAC,KAAD;AACE,uBAAgB,wBADlB;AAEE,wBAAiB,8BAFnB;AAGE,IAAA,SAAS,EAAEzB,OAAO,CAAClB,KAHrB;AAIE,IAAA,IAAI,EAAE8B,IAJR;AAKE,IAAA,OAAO,EAAEc,WALX;AAME,IAAA,oBAAoB,MANtB;AAOE,IAAA,iBAAiB,EAAE5D,QAPrB;AAQE,IAAA,aAAa,EAAE;AACbkF,MAAAA,OAAO,EAAE;AADI,KARjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAYE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAEpC,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAEZ,OAAO,CAACb,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAyB,IAAA,KAAK,EAAC,QAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF,eAKE,oBAAC,MAAD;AACE,IAAA,aAAa,EAAE;AACb8D,MAAAA,UAAU,EAAE,EADC;AAEbC,MAAAA,SAAS,EAAE,EAFE;AAGbC,MAAAA,QAAQ,EAAE,EAHG;AAIbC,MAAAA,UAAU,EAAE;AAJC,KADjB;AAOE,IAAA,QAAQ,EAAE,CAACC,MAAD,EAAS;AAAEC,MAAAA,aAAF;AAAiBC,MAAAA;AAAjB,KAAT,KAA0C;AAClDnD,MAAAA,QAAQ,CAACrD,WAAW,CAACyD,KAAD,EAAQ6C,MAAR,CAAZ,CAAR,CADkD,CAElD;;AACAC,MAAAA,aAAa,CAAC,IAAD,CAAb,CAHkD,CAKlD;;AACAC,MAAAA,SAAS,GANyC,CAQlD;;AACAD,MAAAA,aAAa,CAAC,KAAD,CAAb;AAEAhC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AAEAnB,MAAAA,QAAQ,CAACpD,aAAa,CAACwD,KAAD,CAAd,CAAR;AAEAkB,MAAAA,WAAW;AAEXE,MAAAA,UAAU,CAAC,8BAAD,EAAiC,SAAjC,CAAV;AACD,KAzBH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA2BG,CAAC;AAAE4B,IAAAA;AAAF,GAAD,kBACC,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AACE,IAAA,EAAE,EAAC,qBADL;AAEE,IAAA,QAAQ,MAFV;AAGE,IAAA,SAAS,EAAEpG,SAHb;AAIE,IAAA,IAAI,EAAC,MAJP;AAKE,IAAA,IAAI,EAAC,YALP;AAME,IAAA,KAAK,EAAC,OANR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eASE,oBAAC,KAAD;AACE,IAAA,EAAE,EAAC,qBADL;AAEE,IAAA,QAAQ,MAFV;AAGE,IAAA,SAAS,MAHX;AAIE,IAAA,SAAS,EAAEA,SAJb;AAKE,IAAA,IAAI,EAAC,MALP;AAME,IAAA,IAAI,EAAC,WANP;AAOE,IAAA,KAAK,EAAC,aAPR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,eAkBE,oBAAC,KAAD;AACE,IAAA,EAAE,EAAC,qBADL;AAEE,IAAA,QAAQ,MAFV;AAGE,IAAA,SAAS,EAAEA,SAHb;AAIE,IAAA,IAAI,EAAC,MAJP;AAKE,IAAA,IAAI,EAAC,UALP;AAME,IAAA,KAAK,EAAC,UANR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlBF,eA0BE,oBAAC,KAAD;AACE,IAAA,EAAE,EAAC,qBADL;AAEE,IAAA,QAAQ,MAFV;AAGE,IAAA,IAAI,EAAC,YAHP;AAIE,IAAA,KAAK,EAAC,wBAJR;AAKE,IAAA,OAAO,EAAE,CACP;AAAEqG,MAAAA,KAAK,EAAE,KAAT;AAAgBC,MAAAA,KAAK,EAAE;AAAvB,KADO,EAEP;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,KAAK,EAAE;AAAtB,KAFO,CALX;AASE,IAAA,SAAS,EAAErG,MATb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1BF,eAqCE,oBAAC,MAAD;AACE,IAAA,EAAE,EAAC,qBADL;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,QAAQ,EAAEmG,YAHZ;AAIE,IAAA,OAAO,EAAC,WAJV;AAKE,IAAA,KAAK,EAAC,SALR;AAME,IAAA,KAAK,EAAC,QANR;AAOE,IAAA,KAAK,EAAE;AAAEV,MAAAA,SAAS,EAAE,EAAb;AAAiBa,MAAAA,UAAU,EAAE;AAA7B,KAPT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cArCF,CA5BJ,CALF,CADF,CADF,CADF,CAZF,CAJF,CATF,CADF,eAwHE,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAA4B,IAAA,KAAK,EAAE;AAAEb,MAAAA,SAAS,EAAE;AAAb,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,cAAc,EADjB,CAxHF,eA2HE,oBAAC,aAAD;AACE,IAAA,aAAa,EAAE,MADjB;AAEE,IAAA,SAAS,EAAE,MAFb;AAGE,IAAA,UAAU,EAAE,KAHd;AAIE,IAAA,cAAc,EAAE,UAJlB;AAKE,IAAA,oBAAoB,EAAE,CALxB;AAME,IAAA,kBAAkB,EAAE,CANtB;AAOE,IAAA,SAAS,EAAER,SAPb;AAQE,IAAA,YAAY,EAAEI,eARhB;AASE,IAAA,kBAAkB,EAAE,YATtB;AAUE,IAAA,qBAAqB,EAAE,kBAVzB;AAWE,IAAA,eAAe,EAAE,QAXnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3HF,CANF,CADF;AAkJD,CAlPD;;AAoPA,eAAexC,QAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  articlesSelector,\n  postArticle,\n  fetchArticles,\n} from \"../../slices/articles\";\nimport { Field, Form, Formik } from \"formik\";\nimport { TextField } from \"material-ui-formik-components/TextField\";\nimport { Select } from \"material-ui-formik-components/Select\";\nimport {\n  Container,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n} from \"@material-ui/core\";\nimport Article from \"../../components/Article\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport ReactPaginate from \"react-paginate\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport \"./style.css\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\n\nconst useStyles = makeStyles((theme) => ({\n  media: {\n    height: 140,\n  },\n  root: {\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: \"#fff\",\n  },\n  bs: {\n    boxShadow: \"2px 2px 7px 1px #ccc\",\n  },\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    outline: 0,\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: \"#fff\",\n  },\n}));\n\nconst Articles = (props) => {\n  const classes = useStyles();\n\n  const [art, setArt] = React.useState({});\n\n  const dispatch = useDispatch();\n  const { articles, loading } = useSelector(articlesSelector, {\n    onCompleted: setArt,\n  });\n\n  var token;\n  if (!props.location.state) {\n    token = \"\";\n  } else {\n    token = props.location.state.id;\n  }\n\n  const [open, setOpen] = React.useState(false);\n  var [count, setCount] = React.useState(0);\n  const [show, setShow] = React.useState(false);\n  const [msg, setMsg] = React.useState(\"\");\n  const [type, setType] = React.useState(\"\");\n\n  useEffect(\n    () => {\n      dispatch(fetchArticles(token));\n      setArt(articles);\n    },\n    [dispatch],\n    articles\n  );\n\n  console.log(art);\n  const handleNewArticle = () => {\n    console.log(art);\n    // const obj = {};\n    // obj[\"newKey\"] = [];\n    // obj.newKey = [];\n    // {\n    //   /* setArt() */\n    // }\n  };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  function Alert(props) {\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n  }\n\n  const showReport = (val, type) => {\n    setMsg(val);\n    setType(type);\n    setShow(true);\n  };\n\n  const hideReport = () => {\n    setShow(false);\n  };\n\n  var offset = 0;\n  var perpage = 8;\n  var currentpage;\n\n  const pageCount = Math.ceil(articles.length / perpage);\n\n  const handlePageClick = (e) => {\n    var selectedPage = e.selected;\n    offset = selectedPage * perpage;\n    currentpage = selectedPage;\n    setCount(offset);\n  };\n\n  const renderArticles = () => {\n    if (loading)\n      return (\n        <Backdrop\n          className={classes.backdrop}\n          open={true}\n          onClick={handleClose}\n        >\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n      );\n    return articles\n      .slice(count, count + perpage)\n      .map((article) => (\n        <Article key={article.id} article={article} token={token} excerpt />\n      ));\n  };\n\n  return (\n    <div>\n      <Snackbar open={show} autoHideDuration={6000} onClose={hideReport}>\n        <Alert onClose={hideReport} severity={type}>\n          {msg}\n        </Alert>\n      </Snackbar>\n      <Container maxWidth=\"lg\">\n        <Grid\n          alignItems=\"center\"\n          container\n          spacing={1}\n          style={{ marginTop: 100 }}\n        >\n          <Grid item xs={12} xs={8}>\n            <Typography variant=\"h3\">Articles</Typography>\n          </Grid>\n          <Grid item xs={12} xs={4} style={{ textAlign: \"right\" }}>\n            <Button variant=\"contained\" color=\"primary\" onClick={handleOpen}>\n              Create Article\n            </Button>\n            <Modal\n              aria-labelledby=\"transition-modal-title\"\n              aria-describedby=\"transition-modal-description\"\n              className={classes.modal}\n              open={open}\n              onClose={handleClose}\n              closeAfterTransition\n              BackdropComponent={Backdrop}\n              BackdropProps={{\n                timeout: 500,\n              }}\n            >\n              <Fade in={open}>\n                <div className={classes.paper}>\n                  <Card>\n                    <CardContent>\n                      {/* {renderPosts()} */}\n                      <Typography variant=\"h4\" align=\"center\">\n                        Create Article\n                      </Typography>\n                      <Formik\n                        initialValues={{\n                          form_title: \"\",\n                          form_desc: \"\",\n                          form_cat: \"\",\n                          form_share: \"\",\n                        }}\n                        onSubmit={(values, { setSubmitting, resetForm }) => {\n                          dispatch(postArticle(token, values));\n                          // When button submits form and form is in the process of submitting, submit button is disabled\n                          setSubmitting(true);\n\n                          // Resets form after submission is complete\n                          resetForm();\n\n                          // Sets setSubmitting to false after form is reset\n                          setSubmitting(false);\n\n                          console.log(\"second\");\n\n                          dispatch(fetchArticles(token));\n\n                          handleClose();\n\n                          showReport(\"Article Created Successfully\", \"success\");\n                        }}\n                      >\n                        {({ isSubmitting }) => (\n                          <Form>\n                            <Field\n                              id=\"outlined-full-width\"\n                              required\n                              component={TextField}\n                              type=\"text\"\n                              name=\"form_title\"\n                              label=\"Title\"\n                            />\n                            <Field\n                              id=\"outlined-full-width\"\n                              required\n                              multiline\n                              component={TextField}\n                              type=\"text\"\n                              name=\"form_desc\"\n                              label=\"Description\"\n                            />\n                            <Field\n                              id=\"outlined-full-width\"\n                              required\n                              component={TextField}\n                              type=\"text\"\n                              name=\"form_cat\"\n                              label=\"Category\"\n                            />\n                            <Field\n                              id=\"outlined-full-width\"\n                              required\n                              name=\"form_share\"\n                              label=\"Make Article Sharable?\"\n                              options={[\n                                { value: \"Yes\", label: \"Yes\" },\n                                { value: \"No\", label: \"No\" },\n                              ]}\n                              component={Select}\n                            />\n                            <Button\n                              id=\"outlined-full-width\"\n                              type=\"submit\"\n                              disabled={isSubmitting}\n                              variant=\"contained\"\n                              color=\"primary\"\n                              align=\"center\"\n                              style={{ marginTop: 20, marginLeft: \"40%\" }}\n                            >\n                              Submit\n                            </Button>\n                          </Form>\n                        )}\n                      </Formik>\n                    </CardContent>\n                  </Card>\n                </div>\n              </Fade>\n            </Modal>\n          </Grid>\n        </Grid>\n        <Grid container spacing={0} style={{ marginTop: 40 }}>\n          {renderArticles()}\n        </Grid>\n        <ReactPaginate\n          previousLabel={\"Prev\"}\n          nextLabel={\"Next\"}\n          breakLabel={\"...\"}\n          breakClassName={\"break-me\"}\n          marginPagesDisplayed={2}\n          pageRangeDisplayed={5}\n          pageCount={pageCount}\n          onPageChange={handlePageClick}\n          containerClassName={\"pagination\"}\n          subContainerClassName={\"pages pagination\"}\n          activeClassName={\"active\"}\n        />\n      </Container>\n    </div>\n  );\n};\n\nexport default Articles;\n"]},"metadata":{},"sourceType":"module"}