{"ast":null,"code":"import _defineProperty from\"/Users/user/Documents/GitHub/natfinest-react.github.io/andela-team/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/user/Documents/GitHub/natfinest-react.github.io/andela-team/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import{useSelector,useDispatch}from\"react-redux\";import{articlesSelector,postArticle,fetchArticles}from\"../../slices/articles\";import{Field,Form,Formik}from\"formik\";import{TextField}from\"material-ui-formik-components/TextField\";import{Select}from\"material-ui-formik-components/Select\";import{Container,Grid,Card,CardContent,Typography,Button}from\"@material-ui/core\";import Article from\"../../components/Article\";import Modal from\"@material-ui/core/Modal\";import Backdrop from\"@material-ui/core/Backdrop\";import Fade from\"@material-ui/core/Fade\";import CircularProgress from\"@material-ui/core/CircularProgress\";import ReactPaginate from\"react-paginate\";import MuiAlert from\"@material-ui/lab/Alert\";import\"./style.css\";import Snackbar from\"@material-ui/core/Snackbar\";var useStyles=makeStyles(function(theme){return{media:{height:140},root:{width:\"100%\",maxWidth:360,backgroundColor:\"#fff\"},bs:{boxShadow:\"2px 2px 7px 1px #ccc\"},modal:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",outline:0},paper:{backgroundColor:theme.palette.background.paper,border:\"2px solid #000\",boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)},backdrop:{zIndex:theme.zIndex.drawer+1,color:\"#fff\"}};});var Articles=function Articles(){var _React$createElement2;var classes=useStyles();var dispatch=useDispatch();var _useSelector=useSelector(articlesSelector),articles=_useSelector.articles,loading=_useSelector.loading;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),count=_React$useState4[0],setCount=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),show=_React$useState6[0],setShow=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),msg=_React$useState8[0],setMsg=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),type=_React$useState10[0],setType=_React$useState10[1];useEffect(function(){dispatch(fetchArticles());},[dispatch]);var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};function Alert(props){return/*#__PURE__*/React.createElement(MuiAlert,Object.assign({elevation:6,variant:\"filled\"},props));}var showReport=function showReport(val,type){setMsg(val);setType(type);setShow(true);};// console.log(state.articles);\nvar hideReport=function hideReport(){setShow(false);};var offset=0;var perpage=8;var pageCount=Math.ceil(articles.length/perpage);var handlePageClick=function handlePageClick(e){var selectedPage=e.selected;offset=selectedPage*perpage;setCount(offset);};var renderArticles=function renderArticles(){if(loading)return/*#__PURE__*/React.createElement(Backdrop,{className:classes.backdrop,open:true,onClick:handleClose},/*#__PURE__*/React.createElement(CircularProgress,{color:\"inherit\"}));if(articles.length>0)return articles.slice(count,count+perpage).map(function(article){return/*#__PURE__*/React.createElement(Article,{key:article.id,article:article,excerpt:true});});return/*#__PURE__*/React.createElement(Typography,{variant:\"h5\"},\"Nothing to show here\");};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Snackbar,{open:show,autoHideDuration:6000,onClose:hideReport},/*#__PURE__*/React.createElement(Alert,{onClose:hideReport,severity:type},msg)),/*#__PURE__*/React.createElement(Container,{maxWidth:\"lg\"},/*#__PURE__*/React.createElement(Grid,{alignItems:\"center\",container:true,spacing:1,style:{marginTop:100}},/*#__PURE__*/React.createElement(Grid,_defineProperty({item:true,xs:12},\"xs\",8),/*#__PURE__*/React.createElement(Typography,{variant:\"h3\"},\"Articles\")),/*#__PURE__*/React.createElement(Grid,(_React$createElement2={item:true,xs:12},_defineProperty(_React$createElement2,\"xs\",4),_defineProperty(_React$createElement2,\"style\",{textAlign:\"right\"}),_React$createElement2),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:handleOpen},\"Create Article\"),/*#__PURE__*/React.createElement(Modal,{\"aria-labelledby\":\"transition-modal-title\",\"aria-describedby\":\"transition-modal-description\",className:classes.modal,open:open,onClose:handleClose,closeAfterTransition:true,BackdropComponent:Backdrop,BackdropProps:{timeout:500}},/*#__PURE__*/React.createElement(Fade,{in:open},/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{variant:\"h4\",align:\"center\"},\"Create Article\"),/*#__PURE__*/React.createElement(Formik,{initialValues:{form_title:\"\",form_desc:\"\",form_cat:\"\",form_share:\"\"},onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting,resetForm=_ref.resetForm;dispatch(postArticle(values));// When button submits form and form is in the process of submitting, submit button is disabled\nsetSubmitting(true);// Resets form after submission is complete\nresetForm();// Sets setSubmitting to false after form is reset\nsetSubmitting(false);handleClose();showReport(\"Article Created Successfully\",\"success\");dispatch(fetchArticles());}},function(_ref2){var isSubmitting=_ref2.isSubmitting;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Field,{id:\"outlined-full-width\",required:true,component:TextField,type:\"text\",name:\"form_title\",label:\"Title\"}),/*#__PURE__*/React.createElement(Field,{id:\"outlined-full-width\",required:true,multiline:true,component:TextField,type:\"text\",name:\"form_desc\",label:\"Description\"}),/*#__PURE__*/React.createElement(Field,{id:\"outlined-full-width\",required:true,name:\"form_cat\",label:\"Category\",options:[{value:\"Sport\",label:\"Sport\"},{value:\"Technology\",label:\"Technology\"},{value:\"Lifestyle\",label:\"Lifestyle\"},{value:\"Trending\",label:\"Trending\"},{value:\"Entertainment\",label:\"Entertainment\"},{value:\"Education\",label:\"Education\"}],component:Select}),/*#__PURE__*/React.createElement(Field,{id:\"outlined-full-width\",required:true,name:\"form_share\",label:\"Make Article Sharable?\",options:[{value:\"Yes\",label:\"Yes\"},{value:\"No\",label:\"No\"}],component:Select}),/*#__PURE__*/React.createElement(Button,{id:\"outlined-full-width\",type:\"submit\",disabled:isSubmitting,variant:\"contained\",color:\"primary\",align:\"center\",style:{marginTop:20,marginLeft:\"40%\"}},\"Submit\"));})))))))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:0,style:{marginTop:40}},renderArticles()),/*#__PURE__*/React.createElement(ReactPaginate,{previousLabel:\"Prev\",nextLabel:\"Next\",breakLabel:\"...\",breakClassName:\"break-me\",marginPagesDisplayed:2,pageRangeDisplayed:5,pageCount:pageCount,onPageChange:handlePageClick,containerClassName:\"pagination\",subContainerClassName:\"pages pagination\",activeClassName:\"active\"})));};export default Articles;","map":{"version":3,"sources":["/Users/user/Documents/GitHub/natfinest-react.github.io/andela-team/src/containers/Articles/index.js"],"names":["React","useEffect","makeStyles","useSelector","useDispatch","articlesSelector","postArticle","fetchArticles","Field","Form","Formik","TextField","Select","Container","Grid","Card","CardContent","Typography","Button","Article","Modal","Backdrop","Fade","CircularProgress","ReactPaginate","MuiAlert","Snackbar","useStyles","theme","media","height","root","width","maxWidth","backgroundColor","bs","boxShadow","modal","display","alignItems","justifyContent","outline","paper","palette","background","border","shadows","padding","spacing","backdrop","zIndex","drawer","color","Articles","classes","dispatch","articles","loading","useState","open","setOpen","count","setCount","show","setShow","msg","setMsg","type","setType","handleOpen","handleClose","Alert","props","showReport","val","hideReport","offset","perpage","pageCount","Math","ceil","length","handlePageClick","e","selectedPage","selected","renderArticles","slice","map","article","id","marginTop","textAlign","timeout","form_title","form_desc","form_cat","form_share","values","setSubmitting","resetForm","isSubmitting","value","label","marginLeft"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  articlesSelector,\n  postArticle,\n  fetchArticles,\n} from \"../../slices/articles\";\nimport { Field, Form, Formik } from \"formik\";\nimport { TextField } from \"material-ui-formik-components/TextField\";\nimport { Select } from \"material-ui-formik-components/Select\";\nimport {\n  Container,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  Button,\n} from \"@material-ui/core\";\nimport Article from \"../../components/Article\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport ReactPaginate from \"react-paginate\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport \"./style.css\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\n\nconst useStyles = makeStyles((theme) => ({\n  media: {\n    height: 140,\n  },\n  root: {\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: \"#fff\",\n  },\n  bs: {\n    boxShadow: \"2px 2px 7px 1px #ccc\",\n  },\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    outline: 0,\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: \"#fff\",\n  },\n}));\n\nconst Articles = () => {\n  const classes = useStyles();\n\n  const dispatch = useDispatch();\n  const { articles, loading } = useSelector(articlesSelector);\n\n  const [open, setOpen] = React.useState(false);\n  var [count, setCount] = React.useState(0);\n  const [show, setShow] = React.useState(false);\n  const [msg, setMsg] = React.useState(\"\");\n  const [type, setType] = React.useState(\"\");\n\n  useEffect(() => {\n    dispatch(fetchArticles());\n  }, [dispatch]);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  function Alert(props) {\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n  }\n\n  const showReport = (val, type) => {\n    setMsg(val);\n    setType(type);\n    setShow(true);\n  };\n\n  // console.log(state.articles);\n\n  const hideReport = () => {\n    setShow(false);\n  };\n\n  var offset = 0;\n  var perpage = 8;\n\n  const pageCount = Math.ceil(articles.length / perpage);\n\n  const handlePageClick = (e) => {\n    var selectedPage = e.selected;\n    offset = selectedPage * perpage;\n    setCount(offset);\n  };\n\n  const renderArticles = () => {\n    if (loading)\n      return (\n        <Backdrop\n          className={classes.backdrop}\n          open={true}\n          onClick={handleClose}\n        >\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n      );\n    if (articles.length > 0)\n      return articles\n        .slice(count, count + perpage)\n        .map((article) => (\n          <Article key={article.id} article={article} excerpt />\n        ));\n    return <Typography variant=\"h5\">Nothing to show here</Typography>;\n  };\n\n  return (\n    <div>\n      <Snackbar open={show} autoHideDuration={6000} onClose={hideReport}>\n        <Alert onClose={hideReport} severity={type}>\n          {msg}\n        </Alert>\n      </Snackbar>\n      <Container maxWidth=\"lg\">\n        <Grid\n          alignItems=\"center\"\n          container\n          spacing={1}\n          style={{ marginTop: 100 }}\n        >\n          <Grid item xs={12} xs={8}>\n            <Typography variant=\"h3\">Articles</Typography>\n          </Grid>\n          <Grid item xs={12} xs={4} style={{ textAlign: \"right\" }}>\n            <Button variant=\"contained\" color=\"primary\" onClick={handleOpen}>\n              Create Article\n            </Button>\n            <Modal\n              aria-labelledby=\"transition-modal-title\"\n              aria-describedby=\"transition-modal-description\"\n              className={classes.modal}\n              open={open}\n              onClose={handleClose}\n              closeAfterTransition\n              BackdropComponent={Backdrop}\n              BackdropProps={{\n                timeout: 500,\n              }}\n            >\n              <Fade in={open}>\n                <div className={classes.paper}>\n                  <Card>\n                    <CardContent>\n                      {/* {renderPosts()} */}\n                      <Typography variant=\"h4\" align=\"center\">\n                        Create Article\n                      </Typography>\n                      <Formik\n                        initialValues={{\n                          form_title: \"\",\n                          form_desc: \"\",\n                          form_cat: \"\",\n                          form_share: \"\",\n                        }}\n                        onSubmit={(values, { setSubmitting, resetForm }) => {\n                          dispatch(postArticle(values));\n                          // When button submits form and form is in the process of submitting, submit button is disabled\n                          setSubmitting(true);\n\n                          // Resets form after submission is complete\n                          resetForm();\n\n                          // Sets setSubmitting to false after form is reset\n                          setSubmitting(false);\n\n                          handleClose();\n\n                          showReport(\"Article Created Successfully\", \"success\");\n\n                          dispatch(fetchArticles());\n                        }}\n                      >\n                        {({ isSubmitting }) => (\n                          <Form>\n                            <Field\n                              id=\"outlined-full-width\"\n                              required\n                              component={TextField}\n                              type=\"text\"\n                              name=\"form_title\"\n                              label=\"Title\"\n                            />\n                            <Field\n                              id=\"outlined-full-width\"\n                              required\n                              multiline\n                              component={TextField}\n                              type=\"text\"\n                              name=\"form_desc\"\n                              label=\"Description\"\n                            />\n                            <Field\n                              id=\"outlined-full-width\"\n                              required\n                              name=\"form_cat\"\n                              label=\"Category\"\n                              options={[\n                                { value: \"Sport\", label: \"Sport\" },\n                                { value: \"Technology\", label: \"Technology\" },\n                                { value: \"Lifestyle\", label: \"Lifestyle\" },\n                                { value: \"Trending\", label: \"Trending\" },\n                                {\n                                  value: \"Entertainment\",\n                                  label: \"Entertainment\",\n                                },\n                                { value: \"Education\", label: \"Education\" },\n                              ]}\n                              component={Select}\n                            />\n                            <Field\n                              id=\"outlined-full-width\"\n                              required\n                              name=\"form_share\"\n                              label=\"Make Article Sharable?\"\n                              options={[\n                                { value: \"Yes\", label: \"Yes\" },\n                                { value: \"No\", label: \"No\" },\n                              ]}\n                              component={Select}\n                            />\n                            <Button\n                              id=\"outlined-full-width\"\n                              type=\"submit\"\n                              disabled={isSubmitting}\n                              variant=\"contained\"\n                              color=\"primary\"\n                              align=\"center\"\n                              style={{ marginTop: 20, marginLeft: \"40%\" }}\n                            >\n                              Submit\n                            </Button>\n                          </Form>\n                        )}\n                      </Formik>\n                    </CardContent>\n                  </Card>\n                </div>\n              </Fade>\n            </Modal>\n          </Grid>\n        </Grid>\n        <Grid container spacing={0} style={{ marginTop: 40 }}>\n          {renderArticles()}\n        </Grid>\n        <ReactPaginate\n          previousLabel={\"Prev\"}\n          nextLabel={\"Next\"}\n          breakLabel={\"...\"}\n          breakClassName={\"break-me\"}\n          marginPagesDisplayed={2}\n          pageRangeDisplayed={5}\n          pageCount={pageCount}\n          onPageChange={handlePageClick}\n          containerClassName={\"pagination\"}\n          subContainerClassName={\"pages pagination\"}\n          activeClassName={\"active\"}\n        />\n      </Container>\n    </div>\n  );\n};\n\nexport default Articles;\n"]},"metadata":{},"sourceType":"module"}